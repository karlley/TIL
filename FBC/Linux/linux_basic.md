# linux basic

Linux の基礎

## ファイルの種類

テキストファイル: 文字列が書かれたファイル
バイナリファイル: 画像、音声、コマンドファイル等の人が読めないファイル

## コマンドの種類

* 組み込みコマンド: シェル自体に内蔵しているコマンド(`cd`、`pwd`など)
* 外部コマンド: 実行ファイルとしてファイルシステムに存在するコマンド(`cp`、`locate`など)

## パーミッション

パーミッションについて

### ファイルのパーミッション

ファイルのパーミッション表示

```
$ ls -l ファイル名
```

ファイルタイプ

* `-`: 通常ファイル
* `d`: ディレクトリ
* `l`: シンボリックリンク

権限

* `r`: 読み取り(read)
* `w`: 書き込み(write)
* `x`: 実行(excute)

### ディレクトリのパーミッション

ディレクトリのパーミッション表示

```
$ ls -ld ディレクトリ名
```

権限

* `r`: ディレクトリのファイル取得(read)
* `w`: ディレクトリのファイル/ディレクトリの作成/削除(write)
* `x`: ディレクトリをカレントディレクトリにする(excute)

### パーミッション変更

`chmod 対象ユーザ どうるす 権限の種類`

対象ユーザ

* `u`：オーナー
* `g`: グループ
* `o`: その他
* `a`: 全て

どうする

* `+`: 権限追加
* `-`: 権限削除
* `=`: そのまま

数値モードでの表現

* 読み取り: 4
* 書き込み: 2
* 実行: 1

## プロセス

* 実行されるプログラムにはプロセスIDが振り当てられる
* プロセスには親と子が存在する

### psコマンドのオプション

`ps`コマンドのオプションは`-`の有無で意味が異なる

* UNIXオプション: ハイフン付き(`ps -aef`)
* BBSDオプション: ハイフン無し(`ps xf`)

## ジョブ

* シェルの処理の単位
* プロセスと違い複数の2つ以上のシェルを同時に使っている場合はジョブ番号は重複する
* ユーザーの入力を受け付ける状態をフォアグラウンド
* ユーザーが対話的に操作出来ないジョブの状態をバックグラウンド

### ジョブの操作

* `ctrl + z`: ジョブの停止
* `fg %ジョブ番号`: ジョブ番号をフォアグラウンドに切替
* `fg`: カレントジョブをフォアグラウンドに切替
* `bg %ジョブ番号`: ジョブ番号をバックグラウンドに切替
* `bg`: カレントジョブをフォアグラウンドに切替
* `ctrl + c`: フォアグラウンドジョブの終了
* `kill %ジョブ番号`: バックグラウンドジョブの終了

## 標準入力、標準出力、標準エラー出力

標準的な入出力チャンネル

* 標準入力(stdin): 標準的な入力
* 標準出力(stdout): 標準的な出力
* 標準エラー出力:(stderr): 標準的なエラーメッセージ出力

# リダイレクト

標準入出力先を変更すること

## ポイント

* `コマンド < リダイレクトするファイル名`: 入力リダイレクト
* `コマンド > リダイレクトするファイル名`: 出力リダイレクト
* リダイレクトではファイル指定よりも標準入力から受け取る仕組みの方が汎用性が高い
* 出力リダイレクト先のファイルは自動生成される

## リダイレクトのチャンネル

リダイレクトのチャンネルは数値で管理される

* 標準入力: 0
* 標準出力: 1
* 標準エラー出力: 2

リダイレクトをまとめて指定刷る場合は`&`を使う

```Shell
# 標準出力、標準エラーをリダイレクト
$ ls /command > result.txt 2>&1
```

## リダイレクト先のファイルの取り扱い

リダイレクト先に指定したファイルに同名が存在する場合は注意が必要

* `>`でリダイレクト: ファイルを上書き
* `>>`でリダイレクト: ファイル松日に追記

## 記法のまとめ

* `< FILE`: 標準入力をFILEに変更
* `> FILE`: 標準出力をFILEに変更
* `>> FILE`: 標準出力をFILE末尾に追記
* `2> FILE`: 標準エラー出力をFILEに変更
* `2>> FILE`: 標準エラー出力をFILE末尾に追加
* `> FILE 2>&1`: 標準出力と標準エラー出力をFILEに変更

## /dev/null

`/dev/null`というファイルがリダイレクト先として使われる

* 入力先として指定しても何も返さない
* 出力先と指定しても書き込みデータは保存されない

具体的な使用例

* 標準入力を空にしたい
* 標準出力を非表示にしてエラーメッセージのみ表示させる
* エラーメッセージを非表示にして標準出力のみ表示させる
* 標準出力、エラーメッセージ共に非表示にしたい

# パイプライン

* コマンドの標準出力を別のコマンドの標準入力につなぐ
* パイプラインは複数繋げることができる

```Shell
# ls コマンドをless コマンドに送る
$ ls -l / less

# history コマンドをless コマンドで読む
$ history | less

# 3つのコマンドをつなげる
$ ls -l /etc | cat -n | less

# 標準エラー出力を繋ぐ
$ ls -l / /xxxx 2>&1 | less
```

# フィルタ

標準入力を入力として受け取り、標準出力に出力するコマンドのこと

* `cat`: 入力をそのまま出力
* `head`: 先頭の部分表示
* `tail`: 末尾の部分表示
* `grep`: 検索パターンの一致行を表示
* `sort`: 並べ買える
* `uniq`: 重複を除外
* `tac`: 逆順に表示
* `wc`: 行数、バイト数を表示
